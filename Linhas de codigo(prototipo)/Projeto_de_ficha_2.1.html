<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de RPG de Mesa</title>
    <link rel="stylesheet" type="text/css" href="rpgstyle.css">
</head>

<body>
    <header id="cabecalho">
        <nav class="menu">
            <h3>Menu Principal:</h3>
            <ol type="I" start="12">
                <li><a href="Login.html">Login</a></li>
                <li><a href="https://bibliotecaelfica.org/category/tormenta-rpg/">Tormenta RPG</a></li>
                <li><a href="https://bibliotecaelfica.org/category/dd-5e/">Dungeons & Dragons</a></li>
                <li><a href="https://bibliotecaelfica.org/category/chamado-de-cthulhu/">Chaos of Ctulhu</a></li>
            </ol>
        </nav>
    </header>

    <div class="container">
        <h1>Ficha de RPG de Mesa</h1>
        <div class="ficha">
            <div class="campo">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome">
            </div>
            <div class="campo">
                <label for="classe">Classe:</label>
                <input type="text" id="classe" name="classe">
            </div>
            <div class="campo">
                <label for="xp">XP Atual:</label>
                <input type="number" id="xp" name="xp">
            </div>
            <div class="campo">
                <button onclick="calcularNivel()">Calcular Nível</button>
            </div>
            <div class="resultado">
                <h2>Nível Calculado:</h2>
                <p id="nivel"></p>
            </div>
            <div class="campo">
                <label for="forca">Força:</label>
                <input type="number" id="forca" onchange="atualizarModificadores()">
                <span id="modificadorForca">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="destreza">Destreza:</label>
                <input type="number" id="destreza" onchange="atualizarModificadores()">
                <span id="modificadorDestreza">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="constituição">Constituição:</label>
                <input type="number" id="constituição" onchange="atualizarModificadores()">
                <span id="modificadorConstituicao">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="inteligencia">Inteligência:</label>
                <input type="number" id="inteligencia" onchange="atualizarModificadores()">
                <span id="modificadorInteligencia">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="sabedoria">Sabedoria:</label>
                <input type="number" id="sabedoria" onchange="atualizarModificadores()">
                <span id="modificadorSabedoria">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="carisma">Carisma:</label>
                <input type="number" id="carisma" onchange="atualizarModificadores()">
                <span id="modificadorCarisma">Mod: 0</span>
            </div>
            <div class="campo">
                <label for="ca">Classe de Armadura (CA):</label>
                <span id="ca">0</span>
            </div>

            <!-- Seção de Perícias -->
            <h2>Perícias</h2>
            <div class="campo">
                <textarea id="pericias" name="pericias"></textarea>
            </div>

            <!-- Seção de Talentos e Magias -->
            <h2>Talentos e Magias</h2>
            <div class="campo">
                <textarea id="talentos-magias" name="talentos-magias"></textarea>
            </div>
        </div>
    </div>

    <script>
        // Função para calcular o modificador de atributos
        function calcularModificador(atributo) {
            return Math.floor((atributo - 10) / 2);
        }

        // Função para atualizar o display do modificador
        function atualizarModificador(atributoId, modificadorId) {
            var atributo = parseInt(document.getElementById(atributoId).value) || 0;
            var modificador = calcularModificador(atributo);
            document.getElementById(modificadorId).textContent = "Mod: " + modificador;
            return modificador; // Retorna o modificador para uso em outros códigos
        }

        // Função para atualizar todos os modificadores e a CA
        function atualizarModificadores() {
            var modificadorDestreza = atualizarModificador('destreza', 'modificadorDestreza');
            atualizarModificador('forca', 'modificadorForca');
            atualizarModificador('constituição', 'modificadorConstituicao');
            atualizarModificador('inteligencia', 'modificadorInteligencia');
            atualizarModificador('sabedoria', 'modificadorSabedoria');
            atualizarModificador('carisma', 'modificadorCarisma');

            // Atualiza a Classe de Armadura
            calcularCA();
        }

        // Função para calcular a CA
        function calcularCA() {
            var nivel = parseInt(document.getElementById('nivel').textContent.replace('Nível: ', '')) || 1; // Obtém o nível
            var caBase = 10; // CA base
            var modificadorDestreza = parseInt(document.getElementById('modificadorDestreza').textContent.replace('Mod: ', '')) || 0; // Obtém o modificador de Destreza
            var metadeNivel = Math.floor(nivel / 2); // Calcula metade do nível
            var ca = caBase + modificadorDestreza + metadeNivel; // Calcula a CA com o modificador de Destreza e metade do nível
            document.getElementById("ca").textContent = ca; // Atualiza o display da CA
        }

        // Calcular CA ao carregar a página
        window.onload = atualizarModificadores;

        // Calcular o nível
        function calcularNivel() {
            var xp = parseInt(document.getElementById("xp").value);
            var nivel = 1;

            // Mapeia faixas de XP para níveis
            if (xp >= 0 && xp < 1000) {
                nivel = 1;
            } else if (xp >= 1000 && xp < 3000) {
                nivel = 2;
            } else if (xp >= 3000 && xp < 6000) {
                nivel = 3;
            } else if (xp >= 6000 && xp < 10000) {
                nivel = 4;
            } else if (xp >= 10000 && xp < 15000) {
                nivel = 5;
            } else if (xp >= 15000 && xp < 21000) {
                nivel = 6;
            } else if (xp >= 21000 && xp < 28000) {
                nivel = 7;
            } else if (xp >= 28000 && xp < 36000) {
                nivel = 8;
            } else if (xp >= 36000 && xp < 45000) {
                nivel = 9;
            } else if (xp >= 45000 && xp < 55000) {
                nivel = 10;
            } else if (xp >= 55000 && xp < 66000) {
                nivel = 11;
            } else if (xp >= 66000 && xp < 78000) {
                nivel = 12;
            } else if (xp >= 78000 && xp < 91000) {
                nivel = 13;
            } else if (xp >= 91000 && xp < 105000) {
                nivel = 14;
            } else if (xp >= 105000 && xp < 120000) {
                nivel = 15;
            } else if (xp >= 120000 && xp < 136000) {
                nivel = 16;
            } else if (xp >= 136000 && xp < 153000) {
                nivel = 17;
            } else if (xp >= 153000 && xp < 171000) {
                nivel = 18;
            } else if (xp >= 171000 && xp < 190000) {
                nivel = 19;
            } else if (xp >= 190000 && xp <= 210000) {
                nivel = 20;
            }

            // Atualiza o nível calculado na página
            document.getElementById("nivel").textContent = "Nível: " + nivel;
            calcularCA(); // Recalcula a CA ao atualizar o nível
        }
    </script>
</body>

</html>
